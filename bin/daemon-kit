#!/usr/bin/env ruby

require 'rubygems'

begin
  require 'rubigen'
rescue LoadError
  $stderr.puts <<EOF

The daemon-kit generator requires the 'rubigen' gem to be installed. Please run
`gem install rubigen` first and then try again.

Thank you for choosing daemon-kit !

EOF
  exit 1
end

if %w(-v --version).include? ARGV.first
  require 'daemon_kit'
  puts "#{File.basename($0)} #{DaemonKit::VERSION}"
  exit(0)
end

require 'rubigen/scripts/generate'
RubiGen::Base.use_application_sources! :rubygems
RubiGen::Base.prepend_sources(*[
  RubiGen::PathSource.new(:app, File.join(File.dirname(__FILE__), "..", "app_generators")),
  RubiGen::PathSource.new(:app, File.join(File.dirname(__FILE__), "..", "daemon_generators"))
])
RubiGen::Scripts::Generate.new.run(ARGV, :generator => 'daemon_kit')
